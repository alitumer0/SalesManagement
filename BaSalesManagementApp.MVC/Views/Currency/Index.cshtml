@model IPagedList<BaSalesManagementApp.MVC.Models.CurrencyVMs.CurrencyListVM>
@using Microsoft.Extensions.Localization
@using X.PagedList.Mvc.Common
@using X.PagedList.Mvc.Core
@using X.PagedList
@using X.PagedList.Mvc.Core.Common
@inject IStringLocalizer<Resource> localizer

@{
    ViewData["Title"] = localizer["CurrencyIndex"];
}

<head>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.5.0/font/bootstrap-icons.min.css">
</head>
<div class="content-wrapper">
    <div class="container-xxl flex-grow-1 container-p-y">
        <h4 class="py-3 mb-4"><span class="text-muted fw-light">@localizer["Currency"] /</span> @localizer["List"]</h4>
        <div class="d-flex justify-content-between align-items-center mb-3">
            <!-- Filtreleme ve sıralama div'i sağa yaslamak için düzenlendi -->
            <div class="d-flex ms-auto" style="gap: 1rem;">
                <form method="get" asp-action="Index" class="d-inline-block me-3">
                    <label>@localizer["Show"]</label>
                    <select id="pageSizeSelect" name="pageSize" onchange="this.form.submit()" class="form-select d-inline-block w-auto ms-2">
                        @{
                            var pageSizes = new[] { 5, 10, 20, 50 };
                        }
                        @foreach (var size in pageSizes)
                        {
                            <option value="@size" selected="@(ViewBag.CurrentPageSize == size)">@size</option>
                        }
                    </select>
                    <label>@localizer["Entries"]</label>
                </form>

                <div id="sortOrder" class="dropdown">
                    <button class="btn btn-primary" type="button" id="dropdownMenuButton" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        <i class="bi bi-filter" style="font-size:1rem"></i>
                    </button>
                    <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                        <a class="dropdown-item" href="@Url.Action("Index", new { sortOrder = "date_desc", page = 1, pageSize = ViewBag.CurrentPageSize })">
                            @localizer["Newest_First"]
                        </a>
                        <a class="dropdown-item" href="@Url.Action("Index", new { sortOrder = "date_asc", page = 1, pageSize = ViewBag.CurrentPageSize })">
                            @localizer["Oldest_First"]
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <div class="card">
            <div class="table-responsive text-nowrap">
                <table class="table">
                    <thead>
                        <tr>
                            <th>@localizer["Created_Date"].ToString().ToUpper()</th>
                            <th>@localizer["Dollar_Rate"].ToString().ToUpper()</th>
                            <th>@localizer["Euro_Rate"].ToString().ToUpper()</th>
                        </tr>
                    </thead>
                    <tbody class="table-border-bottom-0">
                        @foreach (var currency in Model)
                        {
                            <tr>
                                <td>@currency.CreatedDate</td>
                                <td>@currency.DollarRate</td>
                                <td>@currency.EuroRate</td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
            <div class="d-flex justify-content-center mt-3">
                @Html.PagedListPager(Model, page => Url.Action("Index", new { page, sortOrder = ViewBag.CurrentSort, pageSize = ViewBag.CurrentPageSize, searchQuery = ViewData["CurrentSearchQuery"] }), new PagedListRenderOptions
           {
               Display = PagedListDisplayMode.Always,
               UlElementClasses = new[] { "pagination", "justify-content-center" },
               LiElementClasses = new[] { "page-item" },
               PageClasses = new[] { "page-link" },
               LinkToPreviousPageFormat = localizer["Previous"],
               LinkToNextPageFormat = localizer["Next"],
               LinkToFirstPageFormat = localizer["First"],
               LinkToLastPageFormat = localizer["Last"],
               ContainerDivClasses = new[] { "d-flex", "justify-content-center" }
           })
            </div>
        </div>
    </div>
</div>